replicaCount: 1

image:
  repository: ghcr.io/synyx/kudos
  pullPolicy: IfNotPresent
  tag: main

app:
  origin: https://localhost
  db:
    user: 'kudos'
    passwordSecret: ''  # Auto-generated for selfcontained mode
    host: ''
    port: 5432
    name: 'kudos'
    ssl:
      mode: 'disable'  # disable, allow, prefer, require, verify-ca, verify-full
      # For operator mode, 'require' is recommended due to Spilo's default SSL setup

imagePullSecrets: []
nameOverride: ''
fullnameOverride: ''

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  className: ''
  annotations: {}
  hosts:
    - host: localhost
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

postgres:
  # operator, selfcontained
  mode: "selfcontained"
  version: "15"

  # For operator mode
  operator:
    clusterName: "kudos-postgres"
    teamId: "kudos"
    namespace: ""  # defaults to release namespace
    numberOfInstances: 2
    storage:
      size: "10Gi"
    resources:
      limits:
        memory: "1Gi"
        cpu: "500m"
      requests:
        memory: "256Mi"
        cpu: "100m"
    ssl:
      # Zalando operator (Spilo) requires SSL by default
      mode: "require"  # disable, allow, prefer, require, verify-ca, verify-full

  # For self-contained mode
  selfcontained:
    storage:
      size: "10Gi"
      storageClass: ""
    resources:
      limits:
        memory: "1Gi"
        cpu: "500m"
      requests:
        memory: "256Mi"
        cpu: "100m"
    securityContext:
      allowPrivilegeEscalation: false
      runAsNonRoot: true
      runAsUser: 999
      runAsGroup: 999
      readOnlyRootFilesystem: false
